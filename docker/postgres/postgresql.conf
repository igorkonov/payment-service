# PostgreSQL configuration for production with SSL

# Connection Settings
listen_addresses = '*'
max_connections = 100
superuser_reserved_connections = 3

# SSL Settings (опционально - работает если сертификаты созданы)
ssl = off
# Раскомментируйте после генерации сертификатов:
# ssl = on
# ssl_cert_file = '/var/lib/postgresql/certs/server.crt'
# ssl_key_file = '/var/lib/postgresql/certs/server.key'
# ssl_ca_file = '/var/lib/postgresql/certs/ca.crt'
# ssl_ciphers = 'HIGH:MEDIUM:+3DES:!aNULL'
# ssl_prefer_server_ciphers = on
# ssl_min_protocol_version = 'TLSv1.2'

# Memory Settings
shared_buffers = 256MB
effective_cache_size = 1GB
maintenance_work_mem = 64MB
work_mem = 4MB

# Write Ahead Log
wal_level = replica
max_wal_size = 1GB
min_wal_size = 80MB

# Query Tuning
random_page_cost = 1.1
effective_io_concurrency = 200

# Logging
log_destination = 'stderr'
logging_collector = off
log_line_prefix = '%m [%p] %u@%d '
log_timezone = 'UTC'

# Security
password_encryption = scram-sha-256

# Locale
datestyle = 'iso, mdy'
timezone = 'UTC'
lc_messages = 'en_US.utf8'
lc_monetary = 'en_US.utf8'
lc_numeric = 'en_US.utf8'
lc_time = 'en_US.utf8'
default_text_search_config = 'pg_catalog.english'
